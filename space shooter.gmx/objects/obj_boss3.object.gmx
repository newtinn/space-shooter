<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_boss3_walking_0</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create event

randomize();

pointX = irandom_range(128,room_width-128);
pointY = irandom_range(128,room_height-128);
pointCounter = 0;
pointMove = false;

// animation
frame[0] = spr_boss3_walking_0;
frame[1] = spr_boss3_walking_1;
frame[2] = spr_boss3_walking_2;
frame[3] = spr_boss3_walking_1;
frame[4] = spr_boss3_walking_0;
frame[5] = spr_boss3_walking_3;
frame[6] = spr_boss3_walking_4;
frame[7] = spr_boss3_walking_3;
frameNum = 0;
walking = false;

shooting = false;
instance_create(x,y,obj_boss3_tongue);

moveToPlayer = false;
angleNew = 0;
diffAngleNew = 0;

// health
global.boss3health = 100; // default: 100
hit = false;
hitCountdown = 0;

global.boss3lastx = x;
global.boss3lasty = y;
global.boss3angle = image_angle;
global.boss3sprite = sprite_index;

alarm[0] = 180;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*global.boss3lastx = x;
global.boss3lasty = y;
global.boss3angle = image_angle;
global.boss3sprite = sprite_index;*/

if (instance_exists(obj_boss3_tongue)) {
    with (obj_boss3_tongue) instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>moveToPlayer = false;
pointX = irandom_range(128,room_width-128);
pointY = irandom_range(128,room_height-128);
speed = 0;
alarm[0] = 60;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>shooting = false;
moveToPlayer = true;
alarm[2] = 60;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.paused == false) {
    shooting = true;
}
alarm[1] = 120;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Step event

//scr_turn_object_3d();

global.boss3lastx = x;
global.boss3lasty = y;
global.boss3angle = image_angle;
global.boss3sprite = sprite_index;

/*if (pointMove == false) {
    move_towards_point(pointX,pointY,1);
    image_angle = point_direction(x,y,pointX,pointY);
}

if (distance_to_point(pointX,pointY) &lt; 2) {
    pointMove = true;
}

if (pointMove == true) {
    speed = 0;
    if (pointCounter &lt; 100) {
        pointCounter += 1;
    } else {
        pointX = irandom_range(32,room_width-32);
        pointY = irandom_range(32,room_height-32);
        pointCounter = 0;
        pointMove = false;
    }
}*/

if (speed &gt; 0) || (walking == true) {
    frameNum += 0.15;    
    
    if (frameNum &gt; array_length_1d(frame)-1) {
        frameNum = 0;
    }    
} else {
    frameNum = 0;
}

sprite_index = frame[floor(frameNum)]; // animation

if (global.boss3health &gt; 0) {
    if (shooting == false) {
        if (instance_exists(obj_player)) {
            if (distance_to_object(obj_boss3_tongue) &lt; 5) {
                
                if (moveToPlayer == true) {
                    if (distance_to_point(pointX,pointY) &gt; 5) {
                        var angle = floor(point_direction(x,y,pointX,pointY));
                        var diffangle = angle_difference(image_angle,angle);
                        if (abs(diffangle) &gt; 5) {
                            direction -= min(abs(diffangle), 5) * sign(diffangle);   
                        } else {
                            direction = point_direction(x,y,pointX,pointY);
                        }
                        image_angle = direction;
                        move_towards_point(pointX,pointY,1.5);
                        walking = true;
                    } else {
                        walking = false;
                        speed = 0;
                    }
                } else {
                    var angle = floor(point_direction(x,y,obj_player.x,obj_player.y));
                    var diffangle = angle_difference(image_angle,angle);
                    direction -= min(abs(diffangle), 7.5) * sign(diffangle);
                    image_angle = direction;
                    walking = false;
                    speed = 0;
                }
            }
        } else {
            speed = 0;
            sprite_index = spr_boss3_walking_0;
            shooting = false;
            walking = false;
        }
    }
} else {
    global.boss3health = 0;
    global.boss[2] = true;
    speed = 0;
    sprite_index = spr_boss3_walking_0;
    walking = false;
    shooting = false;
}

if (obj_boss3_tongue.visible == false) &amp;&amp; (global.boss3health == 0) {
    obj_door.sprite_index = spr_door_horizontal_close;
    obj_door.image_index = 0.15;
    death = instance_create(x,y,obj_boss3_death);
    death.image_angle = image_angle;
    instance_destroy();
}

if (global.bossDone[2] &gt;= 1) {
    global.boss3health = 0;
    instance_destroy();
}

show_debug_message(global.bossDone[2]);

// checking if hit by bullet
if (hit == true) {
    hitCountdown += 1;
    
    if (hitCountdown &gt;= 10) {
        hitCountdown = 0;
        hit = false;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (instance_exists(obj_player)) {
    if (other.objectFrom == obj_player) {
        if (global.boss3health &gt; 0) {
            audio_play_sound(snd_hit_boss3,3,false);
            hit = true;
            if (global.gun == 0) {
                global.boss3health -= 1;
            }
            if (global.gun == 1) {
                global.boss3health -= 2;
            }
        } else {
            hit = instance_create(other.x + lengthdir_x(2,other.image_angle),other.y + lengthdir_y(2,other.image_angle),obj_bullet_hit);
            hit.image_angle = other.image_angle;
        }
        with (other) instance_destroy();
    }
} else {
    hit = instance_create(other.x + lengthdir_x(2,other.image_angle),other.y + lengthdir_y(2,other.image_angle),obj_bullet_hit);
    hit.image_angle = other.image_angle;
    with (other) instance_destroy();
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_player">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>// creating death animation
anim = instance_create(obj_player.x,obj_player.y,obj_player_death);
anim.image_angle = obj_player.image_angle;
anim.direction = obj_player.direction;
anim.depth = obj_player.depth;
with (obj_player) instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>draw_self_3d();

if (hit == true) {
    for (var _i=0; _i&lt;image_number; _i++) {
        draw_sprite_ext(sprite_index, _i, x, y-_i, image_xscale, image_yscale, image_angle, c_red, image_alpha);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
